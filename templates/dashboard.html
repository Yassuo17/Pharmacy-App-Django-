{% extends 'base.html' %}
{% load static %}


{% block content %}
<style>
  .btn-black {
    background-color: #000000;
    color: white;
    padding: 6px 12px;
    text-decoration: none;
    border-radius: 4px;
    font-size: 14px;
    margin-right: 5px;
    display: inline-block;
    transition: background-color 0.2s;
  }

  .btn-black:hover {
    background-color: #333333;
    color: white;
    text-decoration: none;
  }
</style>

<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px;">
  <h1>Yass Pharmacy Admin</h1>
  <a href="{% url 'home' %}" class="btn-black">Se déconnecter</a>
</div>

<h2>Quantité commandée par produit</h2>
<canvas id="orderChart" width="600" height="250"></canvas>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const ctx = document.getElementById('orderChart').getContext('2d');
    new Chart(ctx, {
      type: 'bar',
      data: {
        labels: ['8-7-2025', '12-7-2025', '16-7-2025','18-7-2025','20-7-2025','23-7-2025'],
        datasets: [{
          label: 'nombre de Ventes par jours',
          data: [2, 5, 3, 7, 4, 1],
          backgroundColor: [
            'rgba(1, 1, 3, 0.5)',
            'rgba(1, 1, 3, 0.5)',
            'rgba(1, 1, 3, 0.5)'
          ],
          borderColor: [
            'rgba(1, 1, 3, 0.5)',
            'rgba(1, 1, 3, 0.5)',
            'rgba(1, 1, 3, 0.5)'
          ],
          borderWidth: 1
        }]
      },
      options: {
        responsive: true,
        scales: { y: { beginAtZero: true } }
      }
    });
  });
</script>

<hr>
<h2>Produits</h2>
<table class="table">
  <thead>
    <tr>
      <th>ID</th>
      <th>Nom</th>
      <th>Prix</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    {% for product in products %}
    <tr>
      <td>{{ product.id }}</td>
      <td>{{ product.name }}</td>
      <td>{{ product.price }}</td>
      <td>
        <a href="{% url 'modifier_produit' product.id %}" class="btn-black">Modifier</a>
        <a href="{% url 'supprimer_produit' product.id %}" class="btn-black">Supprimer</a>
      </td>
    </tr>
    {% empty %}
    <tr>
      <td colspan="4">Aucun produit trouvé.</td>
    </tr>
    {% endfor %}
  </tbody>
</table>

<h2>Utilisateurs actifs ({{ users|length }})</h2>
<table class="table table-striped mb-5">
  <thead>
    <tr>
      <th>ID</th>
      <th>Username</th>
      <th>Email</th>
    </tr>
  </thead>
  <tbody>
    {% for u in users %}
    <tr>
      <td>{{ u.id }}</td>
      <td>{{ u.username }}</td>
      <td>{{ u.email }}</td>
    </tr>
    {% empty %}
    <tr><td colspan="3">Aucun utilisateur trouvé.</td></tr>
    {% endfor %}
  </tbody>
</table>

 




{% endblock %}
